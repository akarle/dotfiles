#!/bin/sh
# ~/.shrc -- a config for all POSIX shells
[ -z "$PS1" ] && return  # Exit early if non-interactive

# Crucial exports
PATH=$HOME/bin:$PATH     # Put ~/bin on the for personal scripts
EDITOR='vi'              # $EDITOR, the most important (personal) of exports
VISUAL='vi'              # Some programs give priority to this
PAGER='less'             # less is more
PERL5LIB=$HOME/perl5/lib/perl5  # default cpanminus location
MANPATH=":$HOME/share/man"
export PATH EDITOR VISUAL PAGER PERL5LIB MANPATH

# Shell vars
HISTFILE=${HISTFILE:="$HOME/.sh_histo"}  # Don't override bash_history

# Prompt
last_err() {
    err="$?"
    if [ $err -ne "0" ]; then
        echo "($err) "
    fi
}
PS1='$(last_err)\u@\h:\w \$ '

# Includes
include() { if [ -r "$1" ]; then . "$1"; fi }
include "$HOME/.aliases"
include "$HOME/.shrc.local"
